{"Caption":"Figure 4: TPC-C Update Locality in terms of Physical Writes (1G.20M.100u Trace)","ImageText":[{"Text":"Distribution","TextBB":[168.459,74.8704,199.021,80.5232],"Rotation":0},{"Text":"of","TextBB":[200.72,74.8704,205.817,80.5232],"Rotation":0},{"Text":"Update","TextBB":[207.516,74.8704,227.218,80.5232],"Rotation":0},{"Text":"Frequencies","TextBB":[228.917,74.8704,262.54,80.5232],"Rotation":0},{"Text":"Distribution","TextBB":[386.959,74.8704,417.521,80.5232],"Rotation":0},{"Text":"of","TextBB":[419.22,74.8704,424.317,80.5232],"Rotation":0},{"Text":"Update","TextBB":[426.016,74.8704,445.718,80.5232],"Rotation":0},{"Text":"Frequencies","TextBB":[447.417,74.8704,481.04,80.5232],"Rotation":0},{"Text":"Distribution","TextBB":[598.293,74.8704,628.854,80.5232],"Rotation":0},{"Text":"of","TextBB":[630.553,74.8704,635.65,80.5232],"Rotation":0},{"Text":"Update","TextBB":[637.349,74.8704,657.051,80.5232],"Rotation":0},{"Text":"Frequencies","TextBB":[658.75,74.8704,692.373,80.5232],"Rotation":0},{"Text":"4","TextBB":[119.13,127.343,122.528,132.995],"Rotation":0},{"Text":"2","TextBB":[119.13,162.232,122.528,167.884],"Rotation":0},{"Text":"No.","TextBB":[541.772,177.029,548.196,187.836],"Rotation":3},{"Text":"of","TextBB":[541.772,169.305,548.196,175.098],"Rotation":3},{"Text":"physical","TextBB":[541.772,142.286,548.196,167.374],"Rotation":3},{"Text":"erases","TextBB":[541.772,119.511,548.196,140.354],"Rotation":3},{"Text":"(x100i0)","TextBB":[541.772,92.4913,548.196,117.579],"Rotation":3},{"Text":"No.","TextBB":[326.772,170.854,333.196,181.661],"Rotation":3},{"Text":"of","TextBB":[326.772,163.131,333.196,168.923],"Rotation":3},{"Text":"physical","TextBB":[326.772,136.111,333.196,161.199],"Rotation":3},{"Text":"page","TextBB":[326.772,118.733,333.196,134.18],"Rotation":3},{"Text":"writes","TextBB":[326.772,98.6668,333.196,116.802],"Rotation":3},{"Text":"No.","TextBB":[111.939,169.503,118.362,180.31],"Rotation":3},{"Text":"of","TextBB":[111.939,161.78,118.362,167.572],"Rotation":3},{"Text":"log","TextBB":[111.939,150.583,118.362,159.849],"Rotation":3},{"Text":"records","TextBB":[111.939,125.495,118.362,148.652],"Rotation":3},{"Text":"(x1000)","TextBB":[111.939,100.018,118.362,123.564],"Rotation":3},{"Text":"6","TextBB":[119.13,92.4539,122.528,98.1067],"Rotation":0},{"Text":"600","TextBB":[334.501,102.232,344.694,107.884],"Rotation":0},{"Text":"400","TextBB":[334.501,133.87,344.694,139.523],"Rotation":0},{"Text":"200","TextBB":[334.501,165.482,344.694,171.134],"Rotation":0},{"Text":"0","TextBB":[119.13,197.12,122.528,202.773],"Rotation":0},{"Text":"0","TextBB":[341.297,197.12,344.694,202.773],"Rotation":0},{"Text":"500","TextBB":[166.098,203.232,176.291,208.884],"Rotation":0},{"Text":"1000","TextBB":[208.954,203.232,222.546,208.884],"Rotation":0},{"Text":"1500","TextBB":[253.482,203.232,267.073,208.884],"Rotation":0},{"Text":"(a)","TextBB":[121.5,220.545,135.286,231.952],"Rotation":0},{"Text":"Log","TextBB":[138.473,220.545,158.575,231.952],"Rotation":0},{"Text":"reference","TextBB":[161.682,220.545,207.846,231.952],"Rotation":0},{"Text":"locality","TextBB":[210.983,220.545,248.27,231.952],"Rotation":0},{"Text":"by","TextBB":[251.377,220.545,263.812,231.952],"Rotation":0},{"Text":"pages","TextBB":[266.919,220.545,295.2,231.952],"Rotation":0},{"Text":"6","TextBB":[548.963,125.954,552.361,131.607],"Rotation":0},{"Text":"3","TextBB":[548.963,161.537,552.361,167.19],"Rotation":0},{"Text":"0","TextBB":[548.963,197.12,552.361,202.773],"Rotation":0},{"Text":"500","TextBB":[386.098,203.232,396.291,208.884],"Rotation":0},{"Text":"2000","TextBB":[159.132,209.022,174.578,215.446],"Rotation":0},{"Text":"Most","TextBB":[176.51,209.022,191.56,215.446],"Rotation":0},{"Text":"frequently","TextBB":[193.492,209.022,223.987,215.446],"Rotation":0},{"Text":"updated","TextBB":[225.918,209.022,251.019,215.446],"Rotation":0},{"Text":"pages","TextBB":[252.949,209.022,271.868,215.446],"Rotation":0},{"Text":"9","TextBB":[548.963,90.3704,552.361,96.0232],"Rotation":0},{"Text":"1000","TextBB":[427.204,203.232,440.796,208.884],"Rotation":0},{"Text":"1500","TextBB":[470.038,203.232,483.629,208.884],"Rotation":0},{"Text":"0","TextBB":[554.329,203.232,557.727,208.884],"Rotation":0},{"Text":"2000","TextBB":[377.632,209.022,393.079,215.446],"Rotation":0},{"Text":"Most","TextBB":[395.01,209.022,410.061,215.446],"Rotation":0},{"Text":"frequently","TextBB":[411.992,209.022,442.487,215.446],"Rotation":0},{"Text":"updated","TextBB":[444.418,209.022,469.519,215.446],"Rotation":0},{"Text":"pages","TextBB":[471.449,209.022,490.368,215.446],"Rotation":0},{"Text":"30","TextBB":[606.213,203.232,613.009,208.884],"Rotation":0},{"Text":"60","TextBB":[659.824,203.232,666.62,208.884],"Rotation":0},{"Text":"90","TextBB":[713.408,203.232,720.203,208.884],"Rotation":0},{"Text":"100","TextBB":[583.371,209.022,594.956,215.446],"Rotation":0},{"Text":"Most","TextBB":[596.887,209.022,611.938,215.446],"Rotation":0},{"Text":"frequently","TextBB":[613.869,209.022,644.364,215.446],"Rotation":0},{"Text":"updated","TextBB":[646.295,209.022,671.396,215.446],"Rotation":0},{"Text":"erase","TextBB":[673.327,209.022,690.698,215.446],"Rotation":0},{"Text":"units","TextBB":[692.63,209.022,707.299,215.446],"Rotation":0},{"Text":"(b)","TextBB":[334.69,220.545,349.212,231.952],"Rotation":0},{"Text":"Locality","TextBB":[352.398,220.545,393.811,231.952],"Rotation":0},{"Text":"of","TextBB":[396.918,220.545,407.273,231.952],"Rotation":0},{"Text":"physical","TextBB":[410.46,220.545,451.836,231.952],"Rotation":0},{"Text":"page","TextBB":[455.04,220.545,478.496,231.952],"Rotation":0},{"Text":"writes","TextBB":[481.8,220.545,512.142,231.952],"Rotation":0},{"Text":"(c)","TextBB":[563.298,220.545,577.123,231.952],"Rotation":0},{"Text":"Locality","TextBB":[580.309,220.545,621.722,231.952],"Rotation":0},{"Text":"of","TextBB":[624.662,220.545,635.017,231.952],"Rotation":0},{"Text":"physical","TextBB":[638.204,220.545,679.58,231.952],"Rotation":0},{"Text":"erases","TextBB":[682.951,220.545,713.281,231.952],"Rotation":0}],"Mention":["Second, we examined the log reference locality by counting the\nnumber of log records that updated individual data pages. As shown\nin Figure 4(a), the distribution of update frequencies was highly\nskewed. We also examined the distribution of references in terms\nof how frequently individual data pages were physically written\nto the database. Note that the frequency distribution of physical\npage writes is expected to be correlated to the log reference local-\nity above, but may be slightly different, because a data page cached\nin the buffer pool can be modified multiple times (generating mul-\ntiple log records), until it is evicted and written to the database. We\nobtained the page write count for each data page from the traces,\nwhich contained the information of individual data pages being\nwritten to database, in addition to the update log records. Fig-\nure 4(b) shows the distribution of the frequency of physical page\nwrites for the 2000 most frequently updated pages in the 1G.-\n20M.100u trace. The distribution of the write frequencies is also\nclearly skewed. In this case, the 2000 most frequently written pages\n(1.6% of a total of 128K pages in the database) were written 29%\nof the times (637823 updates).3 We also derived the physical erase\nfrequencies by mapping each page to its corresponding erase unit.\nFigure 4(c) shows the erase frequencies of erase units for the same\n1G.20M.100u trace.\nThird, we examined the temporal locality of data page updates\nby running a sliding window of length 16 through each trace of\nphysical write operations. We counted the number of distinct pages\nwithin individual windows, and averaged them across the entire\nspan of the trace. For the 1G.20M.100u trace, the probability\nthat 16 consecutive physical writes would be done for 16 distinct\ndata pages was 99.9%. We can derive the similar analysis for erase\nunits. The probability that 16 consecutive physical writes would be\ndone for 16 distinct erase units was 93.1% (i.e., on average 14.89\nout of 16). Due to this remarkable lack of temporal locality, the\nupdate patterns of the TPC-C benchmark are expected to cause a\nlarge number of erase operations with flash memory.\n","at the cost of increased storage space for database. As we observed\nin Figure 4(a), the distribution of update frequencies was so skewed\nthat a small fraction of data pages were updated much more fre-\nquently than the rest, before they were evicted from the buffer pool.\nThis implies that the erase units containing the hot pages exhausted\ntheir log regions rapidly, and became prone to merge operations\nvery often. For the reason, the more flash log sectors were added\nto an erase unit, the less frequently the erase unit was merged (i.e.,\ncopied and erased), because more updates were absorbed in the log\nsectors of the erase unit.\nTo understand the performance impact of the reduced merge op-\nerations more realistically, we used the following formula to esti-\nmate the time that an IPL-enabled database server would spend on\nperforming the insert, delete and update operations in the TPC-C\ntraces.\n"],"Page":8,"Number":4,"Type":"Figure","CaptionBB":[195,248,650,261],"Height":1100,"Width":850,"DPI":100,"ImageBB":[109,73,738,234]}