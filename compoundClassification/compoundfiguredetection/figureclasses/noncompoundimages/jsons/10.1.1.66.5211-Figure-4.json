{"Caption":"Figure 4: Adapting latches for use under TLS execu- tion. ","ImageText":[{"Text":"✂","TextBB":[184.869,82.9327,184.869,83.0493],"Rotation":0},{"Text":" ","TextBB":[285.83,82.9327,285.83,83.0493],"Rotation":0},{"Text":"✂","TextBB":[184.869,95.8557,184.869,95.9723],"Rotation":0},{"Text":"✄","TextBB":[184.869,96.0352,184.869,96.1518],"Rotation":0},{"Text":"✂","TextBB":[184.869,108.779,184.869,108.895],"Rotation":0},{"Text":"✄","TextBB":[184.869,108.958,184.869,109.075],"Rotation":0},{"Text":"✂","TextBB":[184.869,121.702,184.869,121.818],"Rotation":0},{"Text":"✄","TextBB":[184.869,121.881,184.869,121.998],"Rotation":0},{"Text":"{","TextBB":[94.6117,124.627,166.338,330.691],"Rotation":0},{"Text":"Acquire","TextBB":[196.984,88.7091,228.31,102.075],"Rotation":0},{"Text":"...work...","TextBB":[196.984,100.824,231.547,114.19],"Rotation":0},{"Text":"Release","TextBB":[196.984,112.94,227.079,126.305],"Rotation":0},{"Text":"✁","TextBB":[285.83,83.1122,285.83,83.2288],"Rotation":0},{"Text":"Violation!","TextBB":[237.799,83.1414,277.111,96.6912],"Rotation":0},{"Text":"Acquire","TextBB":[297.945,88.7091,329.27,102.075],"Rotation":0},{"Text":" ","TextBB":[285.83,95.8557,285.83,95.9723],"Rotation":0},{"Text":"✁","TextBB":[285.83,96.0352,285.83,96.1518],"Rotation":0},{"Text":" ","TextBB":[285.83,108.779,285.83,108.895],"Rotation":0},{"Text":"✁","TextBB":[285.83,108.958,285.83,109.075],"Rotation":0},{"Text":" ","TextBB":[285.83,121.702,285.83,121.818],"Rotation":0},{"Text":"✁","TextBB":[285.83,121.881,285.83,121.998],"Rotation":0},{"Text":" ","TextBB":[153.597,157.888,153.597,158.002],"Rotation":0},{"Text":"✂","TextBB":[244.042,157.888,244.042,158.002],"Rotation":0},{"Text":"☎","TextBB":[334.487,157.888,334.487,158.002],"Rotation":0},{"Text":"✁","TextBB":[153.597,158.063,153.597,158.177],"Rotation":0},{"Text":"✄","TextBB":[244.042,158.063,244.042,158.177],"Rotation":0},{"Text":"✆","TextBB":[334.487,158.063,334.487,158.177],"Rotation":0},{"Text":"✂","TextBB":[244.042,170.472,244.042,170.586],"Rotation":0},{"Text":"☎","TextBB":[334.487,170.472,334.487,170.586],"Rotation":0},{"Text":"✄","TextBB":[244.042,170.647,244.042,170.76],"Rotation":0},{"Text":"✆","TextBB":[334.487,170.647,334.487,170.76],"Rotation":0},{"Text":" ","TextBB":[153.597,208.223,153.597,208.336],"Rotation":0},{"Text":"Large","TextBB":[96.0462,266.589,109.061,288.701],"Rotation":3},{"Text":"critical","TextBB":[96.0462,237.917,109.061,264.229],"Rotation":3},{"Text":"section","TextBB":[96.0462,208.82,109.061,235.557],"Rotation":3},{"Text":"✁","TextBB":[153.597,208.398,153.597,208.511],"Rotation":0},{"Text":" ","TextBB":[153.597,220.806,153.597,220.92],"Rotation":0},{"Text":"✁","TextBB":[153.597,220.981,153.597,221.095],"Rotation":0},{"Text":"latch_cnt++","TextBB":[255.839,180.029,301.083,193.044],"Rotation":0},{"Text":"...work...","TextBB":[255.839,191.826,289.494,204.841],"Rotation":0},{"Text":"(enqueue","TextBB":[255.839,203.623,290.428,216.638],"Rotation":0},{"Text":"release)","TextBB":[292.788,203.623,322.233,216.638],"Rotation":0},{"Text":"✂","TextBB":[244.042,183.056,244.042,183.169],"Rotation":0},{"Text":"✄","TextBB":[244.042,183.23,244.042,183.344],"Rotation":0},{"Text":"✂","TextBB":[244.042,195.639,244.042,195.753],"Rotation":0},{"Text":"✄","TextBB":[244.042,195.814,244.042,195.928],"Rotation":0},{"Text":"✂","TextBB":[244.042,208.223,244.042,208.336],"Rotation":0},{"Text":"✄","TextBB":[244.042,208.398,244.042,208.511],"Rotation":0},{"Text":"latch_cnt++","TextBB":[346.284,180.029,391.528,193.044],"Rotation":0},{"Text":"...work...","TextBB":[346.284,191.826,379.939,204.841],"Rotation":0},{"Text":"(enqueue","TextBB":[346.284,203.623,380.873,216.638],"Rotation":0},{"Text":"release)","TextBB":[383.232,203.623,412.678,216.638],"Rotation":0},{"Text":"☎","TextBB":[334.487,183.056,334.487,183.169],"Rotation":0},{"Text":"✆","TextBB":[334.487,183.23,334.487,183.344],"Rotation":0},{"Text":"☎","TextBB":[334.487,195.639,334.487,195.753],"Rotation":0},{"Text":"✆","TextBB":[334.487,195.814,334.487,195.928],"Rotation":0},{"Text":"☎","TextBB":[334.487,208.223,334.487,208.336],"Rotation":0},{"Text":"✆","TextBB":[334.487,208.398,334.487,208.511],"Rotation":0},{"Text":"✂","TextBB":[244.042,220.806,244.042,220.92],"Rotation":0},{"Text":"☎","TextBB":[334.487,220.806,334.487,220.92],"Rotation":0},{"Text":"✄","TextBB":[244.042,220.981,244.042,221.095],"Rotation":0},{"Text":"✆","TextBB":[334.487,220.981,334.487,221.095],"Rotation":0},{"Text":" ","TextBB":[153.597,233.39,153.597,233.504],"Rotation":0},{"Text":"✂","TextBB":[244.042,233.39,244.042,233.504],"Rotation":0},{"Text":"☎","TextBB":[334.487,233.39,334.487,233.504],"Rotation":0},{"Text":"✁","TextBB":[153.597,233.565,153.597,233.678],"Rotation":0},{"Text":"✄","TextBB":[244.042,233.565,244.042,233.678],"Rotation":0},{"Text":"✆","TextBB":[334.487,233.565,334.487,233.678],"Rotation":0},{"Text":"☎","TextBB":[334.487,245.974,334.487,246.087],"Rotation":0},{"Text":"✆","TextBB":[334.487,246.148,334.487,246.262],"Rotation":0},{"Text":"oldest","TextBB":[181.071,246.439,203.532,261.049],"Rotation":0},{"Text":"✂","TextBB":[244.042,245.974,244.042,246.087],"Rotation":0},{"Text":"✄","TextBB":[244.042,246.148,244.042,246.262],"Rotation":0},{"Text":"✂","TextBB":[244.042,258.557,244.042,258.671],"Rotation":0},{"Text":"✄","TextBB":[244.042,258.732,244.042,258.846],"Rotation":0},{"Text":"✂","TextBB":[244.042,271.141,244.042,271.254],"Rotation":0},{"Text":"✄","TextBB":[244.042,271.316,244.042,271.429],"Rotation":0},{"Text":"Commit","TextBB":[255.839,250.812,286.785,263.826],"Rotation":0},{"Text":"work","TextBB":[289.145,250.812,308.643,263.826],"Rotation":0},{"Text":"latch_cnt−−","TextBB":[255.839,262.609,301.083,275.624],"Rotation":0},{"Text":"☎","TextBB":[334.487,271.141,334.487,271.254],"Rotation":0},{"Text":"✆","TextBB":[334.487,271.316,334.487,271.429],"Rotation":0},{"Text":"☎","TextBB":[334.487,283.724,334.487,283.838],"Rotation":0},{"Text":"✆","TextBB":[334.487,283.899,334.487,284.013],"Rotation":0},{"Text":"☎","TextBB":[334.487,308.892,334.487,309.005],"Rotation":0},{"Text":"✆","TextBB":[334.487,309.066,334.487,309.18],"Rotation":0},{"Text":"Commit","TextBB":[346.284,282.271,377.23,295.285],"Rotation":0},{"Text":"work","TextBB":[379.589,282.271,399.088,295.285],"Rotation":0},{"Text":"latch_cnt−−","TextBB":[346.284,294.068,391.528,307.083],"Rotation":0},{"Text":"Release","TextBB":[346.284,305.865,375.588,318.88],"Rotation":0},{"Text":" ","TextBB":[225.685,354.858,225.685,354.977],"Rotation":0},{"Text":"☎","TextBB":[320.517,354.858,320.517,354.977],"Rotation":0},{"Text":"✁","TextBB":[225.685,355.041,225.685,355.16],"Rotation":0},{"Text":"✆","TextBB":[320.517,355.041,320.517,355.16],"Rotation":0},{"Text":"✂","TextBB":[130.853,368.052,130.853,368.171],"Rotation":0},{"Text":" ","TextBB":[225.685,368.052,225.685,368.171],"Rotation":0},{"Text":"☎","TextBB":[320.517,368.052,320.517,368.171],"Rotation":0},{"Text":"✄","TextBB":[130.853,368.235,130.853,368.354],"Rotation":0},{"Text":"✁","TextBB":[225.685,368.235,225.685,368.354],"Rotation":0},{"Text":"✆","TextBB":[320.517,368.235,320.517,368.354],"Rotation":0},{"Text":"Small","TextBB":[99.3723,481.289,113.018,504.385],"Rotation":3},{"Text":"critical","TextBB":[99.3723,451.227,113.018,478.815],"Rotation":3},{"Text":"sections","TextBB":[99.3723,416.869,113.018,448.753],"Rotation":3},{"Text":"{","TextBB":[114.361,443.429,130.193,488.915],"Rotation":0},{"Text":"{","TextBB":[114.361,492.906,130.193,538.393],"Rotation":0},{"Text":"✂","TextBB":[130.853,394.44,130.853,394.559],"Rotation":0},{"Text":"✄","TextBB":[130.853,407.817,130.853,407.936],"Rotation":0},{"Text":"✂","TextBB":[130.853,407.634,130.853,407.753],"Rotation":0},{"Text":"✄","TextBB":[130.853,394.623,130.853,394.742],"Rotation":0},{"Text":"(enqueue","TextBB":[238.054,378.072,274.321,391.718],"Rotation":0},{"Text":"acquire)","TextBB":[276.795,378.072,309.322,391.718],"Rotation":0},{"Text":"...work...","TextBB":[238.054,390.442,273.342,404.088],"Rotation":0},{"Text":"(enqueue","TextBB":[238.054,402.811,274.321,416.457],"Rotation":0},{"Text":"release)","TextBB":[276.795,402.811,307.669,416.457],"Rotation":0},{"Text":" ","TextBB":[225.685,394.44,225.685,394.559],"Rotation":0},{"Text":"✁","TextBB":[225.685,407.817,225.685,407.936],"Rotation":0},{"Text":" ","TextBB":[225.685,407.634,225.685,407.753],"Rotation":0},{"Text":"✁","TextBB":[225.685,394.623,225.685,394.742],"Rotation":0},{"Text":"(enqueue","TextBB":[332.886,378.072,369.153,391.718],"Rotation":0},{"Text":"acquire)","TextBB":[371.627,378.072,404.154,391.718],"Rotation":0},{"Text":"...work...","TextBB":[332.886,390.442,368.174,404.088],"Rotation":0},{"Text":"(enqueue","TextBB":[332.886,402.811,369.153,416.457],"Rotation":0},{"Text":"release)","TextBB":[371.627,402.811,402.501,416.457],"Rotation":0},{"Text":"☎","TextBB":[320.517,381.246,320.517,381.365],"Rotation":0},{"Text":"✂","TextBB":[130.853,420.828,130.853,420.947],"Rotation":0},{"Text":" ","TextBB":[225.685,420.828,225.685,420.947],"Rotation":0},{"Text":"☎","TextBB":[320.517,420.828,320.517,420.947],"Rotation":0},{"Text":"✄","TextBB":[130.853,421.011,130.853,421.13],"Rotation":0},{"Text":"✁","TextBB":[225.685,421.011,225.685,421.13],"Rotation":0},{"Text":"✆","TextBB":[320.517,421.011,320.517,421.13],"Rotation":0},{"Text":"✆","TextBB":[320.517,407.817,320.517,407.936],"Rotation":0},{"Text":"☎","TextBB":[320.517,407.634,320.517,407.753],"Rotation":0},{"Text":"✆","TextBB":[320.517,394.623,320.517,394.742],"Rotation":0},{"Text":"☎","TextBB":[320.517,394.44,320.517,394.559],"Rotation":0},{"Text":"✆","TextBB":[320.517,381.429,320.517,381.548],"Rotation":0},{"Text":"✂","TextBB":[130.853,434.022,130.853,434.141],"Rotation":0},{"Text":" ","TextBB":[225.685,434.022,225.685,434.141],"Rotation":0},{"Text":"☎","TextBB":[320.517,434.022,320.517,434.141],"Rotation":0},{"Text":"✄","TextBB":[130.853,434.205,130.853,434.324],"Rotation":0},{"Text":"✁","TextBB":[225.685,434.205,225.685,434.324],"Rotation":0},{"Text":"✆","TextBB":[320.517,434.205,320.517,434.324],"Rotation":0},{"Text":"☎","TextBB":[320.517,447.216,320.517,447.335],"Rotation":0},{"Text":"✆","TextBB":[320.517,447.399,320.517,447.518],"Rotation":0},{"Text":"oldest","TextBB":[159.66,447.704,183.21,463.023],"Rotation":0},{"Text":" ","TextBB":[225.685,447.216,225.685,447.335],"Rotation":0},{"Text":"✁","TextBB":[225.685,447.399,225.685,447.518],"Rotation":0},{"Text":" ","TextBB":[225.685,460.41,225.685,460.529],"Rotation":0},{"Text":"✁","TextBB":[225.685,486.981,225.685,487.1],"Rotation":0},{"Text":" ","TextBB":[225.685,486.798,225.685,486.917],"Rotation":0},{"Text":"✁","TextBB":[225.685,473.787,225.685,473.906],"Rotation":0},{"Text":" ","TextBB":[225.685,473.604,225.685,473.723],"Rotation":0},{"Text":"✁","TextBB":[225.685,460.593,225.685,460.712],"Rotation":0},{"Text":"Acquire","TextBB":[238.054,452.289,270.037,465.935],"Rotation":0},{"Text":"Commit","TextBB":[238.054,464.658,270.502,478.304],"Rotation":0},{"Text":"work","TextBB":[272.976,464.658,293.42,478.304],"Rotation":0},{"Text":"Release","TextBB":[238.054,477.027,268.78,490.673],"Rotation":0},{"Text":"☎","TextBB":[320.517,460.41,320.517,460.529],"Rotation":0},{"Text":"✆","TextBB":[320.517,460.593,320.517,460.712],"Rotation":0},{"Text":"☎","TextBB":[320.517,473.604,320.517,473.723],"Rotation":0},{"Text":"✆","TextBB":[320.517,473.787,320.517,473.906],"Rotation":0},{"Text":"☎","TextBB":[320.517,486.798,320.517,486.917],"Rotation":0},{"Text":"oldest","TextBB":[254.492,493.058,278.043,508.377],"Rotation":0},{"Text":"✆","TextBB":[320.517,486.981,320.517,487.1],"Rotation":0},{"Text":"☎","TextBB":[320.517,499.992,320.517,500.111],"Rotation":0},{"Text":"☎","TextBB":[320.517,539.574,320.517,539.693],"Rotation":0},{"Text":"✆","TextBB":[320.517,526.563,320.517,526.682],"Rotation":0},{"Text":"☎","TextBB":[320.517,526.38,320.517,526.499],"Rotation":0},{"Text":"✆","TextBB":[320.517,513.369,320.517,513.488],"Rotation":0},{"Text":"☎","TextBB":[320.517,513.186,320.517,513.305],"Rotation":0},{"Text":"✆","TextBB":[320.517,500.175,320.517,500.294],"Rotation":0},{"Text":"✆","TextBB":[320.517,539.757,320.517,539.876],"Rotation":0},{"Text":"Acquire","TextBB":[332.886,501.766,364.869,515.412],"Rotation":0},{"Text":"Commit","TextBB":[332.886,514.136,365.334,527.781],"Rotation":0},{"Text":"work","TextBB":[367.808,514.136,388.252,527.781],"Rotation":0},{"Text":"Release","TextBB":[332.886,526.505,363.612,540.151],"Rotation":0},{"Text":"(c)","TextBB":[89.9994,544.138,104.368,553.968],"Rotation":0},{"Text":"Lazy","TextBB":[109.238,544.138,133.901,553.968],"Rotation":0},{"Text":"latch","TextBB":[138.429,544.138,163.59,553.968],"Rotation":0},{"Text":"acquire.","TextBB":[168.117,544.138,208.311,553.968],"Rotation":0},{"Text":"Delaying","TextBB":[215.362,544.138,260.283,553.968],"Rotation":0},{"Text":"the","TextBB":[264.81,544.138,281.138,553.968],"Rotation":0},{"Text":"acquire","TextBB":[285.676,544.138,322.605,553.968],"Rotation":0},{"Text":"shrinks","TextBB":[327.132,544.138,363.54,553.968],"Rotation":0},{"Text":"the","TextBB":[368.067,544.138,384.395,553.968],"Rotation":0},{"Text":"critical","TextBB":[388.934,544.138,424.223,553.968],"Rotation":0},{"Text":"section.","TextBB":[89.9994,556.626,128.61,566.456],"Rotation":0},{"Text":"☎","TextBB":[334.487,296.308,334.487,296.422],"Rotation":0},{"Text":"Acquire","TextBB":[143.223,378.072,175.205,391.718],"Rotation":0},{"Text":"...work...","TextBB":[143.223,390.442,178.51,404.088],"Rotation":0},{"Text":"Release","TextBB":[143.223,402.811,173.948,416.457],"Rotation":0},{"Text":"✆","TextBB":[334.487,296.483,334.487,296.596],"Rotation":0},{"Text":" ","TextBB":[225.685,381.246,225.685,381.365],"Rotation":0},{"Text":"oldest","TextBB":[271.516,277.898,293.977,292.508],"Rotation":0},{"Text":"✁","TextBB":[225.685,381.429,225.685,381.548],"Rotation":0},{"Text":"✂","TextBB":[130.853,354.858,130.853,354.977],"Rotation":0},{"Text":"{","TextBB":[114.361,369.213,130.193,414.699],"Rotation":0},{"Text":"☎","TextBB":[334.487,258.557,334.487,258.671],"Rotation":0},{"Text":"✄","TextBB":[130.853,355.041,130.853,355.16],"Rotation":0},{"Text":"✂","TextBB":[130.853,381.246,130.853,381.365],"Rotation":0},{"Text":"✆","TextBB":[334.487,258.732,334.487,258.846],"Rotation":0},{"Text":"(b)","TextBB":[89.9994,329.591,105.674,339.421],"Rotation":0},{"Text":"Aggressive","TextBB":[110.013,329.591,164.055,339.421],"Rotation":0},{"Text":"latch","TextBB":[167.243,329.591,192.393,339.421],"Rotation":0},{"Text":"acquire.","TextBB":[195.592,329.591,235.786,339.421],"Rotation":0},{"Text":"The","TextBB":[240.767,329.591,261.025,339.421],"Rotation":0},{"Text":"long","TextBB":[264.224,329.591,285.776,339.421],"Rotation":0},{"Text":"critical","TextBB":[288.975,329.591,324.265,339.421],"Rotation":0},{"Text":"section","TextBB":[327.464,329.591,362.809,339.421],"Rotation":0},{"Text":"that","TextBB":[366.008,329.591,387.561,339.421],"Rotation":0},{"Text":"results","TextBB":[390.76,329.591,424.223,339.421],"Rotation":0},{"Text":"may","TextBB":[89.9994,342.079,111.563,351.909],"Rotation":0},{"Text":"cause","TextBB":[115.482,342.079,142.99,351.909],"Rotation":0},{"Text":"performance","TextBB":[146.908,342.079,210.315,351.909],"Rotation":0},{"Text":"issues.","TextBB":[214.233,342.079,246.446,351.909],"Rotation":0},{"Text":"✄","TextBB":[130.853,381.429,130.853,381.548],"Rotation":0},{"Text":"Acquire","TextBB":[165.394,180.029,195.897,193.044],"Rotation":0},{"Text":"latch_cnt++","TextBB":[165.394,191.826,210.639,204.841],"Rotation":0},{"Text":"...work...","TextBB":[165.394,203.623,199.049,216.638],"Rotation":0},{"Text":"latch_cnt−−","TextBB":[165.394,215.421,210.639,228.435],"Rotation":0},{"Text":" ","TextBB":[153.597,195.639,153.597,195.753],"Rotation":0},{"Text":"✁","TextBB":[153.597,195.814,153.597,195.928],"Rotation":0},{"Text":" ","TextBB":[153.597,170.472,153.597,170.586],"Rotation":0},{"Text":"✁","TextBB":[153.597,170.647,153.597,170.76],"Rotation":0},{"Text":" ","TextBB":[153.597,183.056,153.597,183.169],"Rotation":0},{"Text":"(a)","TextBB":[151.271,142.367,166.292,152.197],"Rotation":0},{"Text":"Latch","TextBB":[170.864,142.367,200.099,152.197],"Rotation":0},{"Text":"operations","TextBB":[204.017,142.367,257.351,152.197],"Rotation":0},{"Text":"create","TextBB":[261.269,142.367,291.987,152.197],"Rotation":0},{"Text":"dependences.","TextBB":[295.906,142.367,362.954,152.197],"Rotation":0},{"Text":"✁","TextBB":[153.597,183.23,153.597,183.344],"Rotation":0},{"Text":"✄","TextBB":[184.869,83.1122,184.869,83.2288],"Rotation":0}],"Mention":["The database system uses latches extensively to pro-\ntect data structures, and as a building block for locks.\nLatches are required for correct execution when multi-\nple transactions are executing concurrently, and ensure\nthat only one thread is accessing a given shared data\nstructure at any time. Latches are typically held only\nbriefly\u2014in Section 4.1.2 we discuss locks, which offer\nconcurrency control for database entities.\nLatches form a dependence between epochs because\nof how they are implemented: a typical implemen-\ntation uses a read-test-write cycle on a memory lo-\ncation (which may be implemented as a test-and-set,\nload-linked\/store-conditional, atomic increment, etc.).\nThis read-test-write cycle can cause a data dependence\nviolation between epochs (Figure 4(a)).\nUnder TLS, using latches to serialize accesses within\na transaction is completely unnecessary\u2014the TLS\nmechanism already ensures that any data protected by\nthe latch is accessed in a serializable order, namely the\noriginal sequential program order. Hence using latches\nto preserve mutual exclusion between epochs is redun-\ndant with the existing TLS mechanism [8]. However,\nlatches do ensure that mutual exclusion is maintained\nbetween transactions, and TLS does not perform that\nfunction. So we cannot simply discard the latches; we\nmust instead ensure that they preserve mutual exclu-\nsion between transactions without causing violations\nbetween the epochs within a transaction.\nThere are two operations performed on a latch: ac-\nquire and release. Let us first consider release oper-\nations. When a latch is released, the latch and the\n","may be held for an extended period of time.\nTo avoid long critical sections, we can also post-\npone acquires as shown in Figure 4(c). In this lazy\napproach, all latch acquires are performed at the end\nof the epoch, then the buffered speculative modifica-\ntions are committed, and finally all latch releases are\nperformed. This method results in much smaller criti-\ncal sections, even when acquire and release operations\nfor a given latch are encountered repeatedly during\nan epoch. A potential disadvantage of this approach\nis that if another transaction changes the protected\ndata, the epoch will violate and restart.\nBoth the lazy and aggressive latch schemes have\na potential problem: they re-order the latch release\noperations relative to the latch acquire operations as\nspecified in the original program. If multiple latches\nare acquired by a single epoch, a deadlock may emerge\nthat is not possible in the sequential execution, as\nshown in Figure 5. Although such deadlocks should be\nrare, there are two strategies to remedy them: avoid-\nance and recovery. Deadlock can be avoided using two\ntraditional techniques: (i) perform all latch acquires in\na single atomic operation, or (ii) enforce a global latch\nacquire ordering [17], such as by sorting the acquire\nqueue by latch address. If avoidance is not possible,\nwe can instead recover from deadlock once detected\n(perhaps through a time-out) by violating and restart-\ning one of the deadlocked epochs. Forward progress is\nguaranteed because there is always at least one epoch\n(the oldest) which executes non-speculatively. The key\ninsight is that restarting an epoch is much cheaper\nthan restarting the entire transaction since there are\nmany epochs per transaction.\n","Next we consider acquire operations. During nor-\nmal execution, when a latch is acquired it prevents\nother transactions in the system from changing the\nassociated data. A na¨ıve approach to handling a latch\nacquire under TLS is to perform the acquire non-\nspeculatively at the point when it is encountered. This\ncan be implemented by a recursive latch, which counts\nthe number of acquires and releases, and makes the\nlatch available to other transactions only when the\ncount reaches zero. This aggressive approach, shown\nin Figure 4(b), has a major drawback: since latch re-\nleases have been delayed until the end of the epoch, we\nhave increased the overall size of the critical section. In\n"],"Page":6,"Number":4,"Type":"Figure","CaptionBB":[88,584,415,614],"Height":1100,"Width":850,"DPI":100,"ImageBB":[88,73,426,574]}